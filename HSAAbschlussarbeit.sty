\usepackage{scrhack}
\usepackage{blindtext}

\setkomafont{sectioning}{\sffamily}

\usepackage{etoolbox}
% Titelseite - was erscheint, was nicht?
\newbool{Diesel}       \boolfalse{Diesel}
\newbool{Verteidigung} \boolfalse{Verteidigung}
\newbool{Zweitpruefer} \boolfalse{Zweitpruefer}

% ------------------------------
% placement options for floats
% ------------------------------
\renewcommand{\floatpagefraction}{.8} % Minimaler Anteil einer Seite, 
                                      % der bei einer p-Plazierung eines 
                                      % oder mehrerer Gleitobjekte erreicht
                                      % werden muss. Voreinstellung: 0.5
\renewcommand{\textfraction}{.15}     % normalerweise 1 - \floatpagefraction
\renewcommand{\topfraction}{.85}
\renewcommand{\bottomfraction}{.7}
\setcounter{topnumber}{9}             % maximale Anzahl floats pro Seitenkopf
\setcounter{bottomnumber}{9}          % maximale Anzahl floats pro Seitenfuss
\setcounter{totalnumber}{20}


%%% -----------------------------------------------------
%%% Fussnoteneinstellungen
%%% -----------------------------------------------------
\deffootnote[1em]{1em}{1em}{\textsuperscript{\thefootnotemark}}
% weg mit dem doofen Einzug bei mehrzeiligen Fussnoten
\renewcommand{\footnoterule}{\vspace*{4pt}\noindent\rule{0.4\textwidth}{0.4pt}\vspace*{4pt}}


%%% --------------------------------------------------
%%% eingebundene Pakete
%%% --------------------------------------------------
\usepackage{url}
\usepackage{booktabs, tabularx}
\usepackage{multirow}
\usepackage[ngerman,english]{babel}

%\usepackage{makeidx}
\usepackage{amssymb}
%\usepackage{amsbsy}
\usepackage{amsmath}
\usepackage{dsfont}
\usepackage{nicefrac}
%\usepackage{ntheorem}
\usepackage{array}
\renewcommand{\[}{\begin{equation}}
\renewcommand{\]}{\end{equation}}

\usepackage{calc}          % From LaTeX distribution
\usepackage{graphicx}      % From LaTeX distribution

%% --------------------------------------------------
%% Literatur: biblatex mit biber
%% --------------------------------------------------
\usepackage[babel,autostyle]{csquotes}
\usepackage[%
    backend=biber,
    style=authoryear,
		dashed=false,
    sortlocale=de_DE,
    natbib=true,
    url=false, 
		isbn=false,
    %doi=true,
    eprint=false,
		bibencoding=utf8,
		safeinputenc,
		maxbibnames=99,
		maxcitenames=2,
		%indexing=cite
		refsegment=chapter, 
		%refsection=chapter,
		defernumbers=true,
		parentracker=true,
    backref=true,
    backrefstyle=three
]{biblatex}
\DeclareBibliographyCategory{Buch} 
%%\DeclareBibliographyCategory{sonstigeQuellen}
\addbibresource{Literatur_Abschlussarbeit.bib}
\renewcommand{\bibfont}{\small}
\renewcommand*{\nameyeardelim}{\addspace} 
\setlength{\bibhang}{0em}
\setlength{\bibitemsep}{1ex}
\defbibheading{bibliography}[\bibname]{%
\section*{#1}%
\markboth{#1}{#1}}
%%\DeclareNameFormat{sortname}{%
      %%\usebibmacro{name:last-first}{#1}{#3}{#5}{#7}%
      %%\usebibmacro{name:delim}}

%% citeB Buchquelle
%\newcommand*{\citeB}[1]{\addtocategory{Buch}{#1}\citet{#1}}
%\newcommand*{\nociteB}[1]{\addtocategory{Buch}{#1}\nocite{#1}}
\newcommand*{\citeB}[1]{\citet{#1}}
\newcommand*{\nociteB}[1]{\nocite{#1}}
%%
% citeQ sonstige Quelle (z.B. für Grafiken)
\newcommand*{\citeQ}[2][]{\addtocategory{sonstigeQuellen}{#2}\citet[#1]{#2}}

% --------------------------------------------------
% Zeilenumbrucheinstellungen
% --------------------------------------------------

% Strafpunkte: Je höher Wert, desto unwahrscheinlicher
%\linepenalty=10
%\clubpenalty=150 % Zeile allein in letztem Absatz
%\widowpenalty=150 % Zeile allein in erstem Absatz
\linepenalty=10
\clubpenalty=1000 % Zeile allein in letztem Absatz
\widowpenalty=1000 % Zeile allein in erstem Absatz
%\emergencystretch=0.015\hsize
%\interlinepenalty=100000


% Farben
\usepackage{xcolor}

\renewcommand*\thechapter       {\@arabic\c@chapter}
\renewcommand*\thesection       {\thechapter.\@arabic\c@section}
\renewcommand*\thetable					{\thechapter.\@arabic\c@table}

%%% Kein 'Kapitel' in der Kapitelueberschrift
\renewcommand{\chaptername}{}

%%% --------------------
%%% defining the header
%%% --------------------
\usepackage{scrlayer-scrpage}
\pagestyle{scrheadings}
\ohead{\pagemark}
\rehead{\rightmark}
\lohead{\leftmark}
\ihead{\headmark}
\chead{}
%\setheadwidth[-1cm]{textwithmarginpar-1cm}
%\setheadtopline{1.5pt}
% gives warning: \setkomafont{pagehead}{\normalfont\sffamily}%\bfseries}
\renewcommand{\headfont}{\normalfont\sffamily}
\setkomafont{pagenumber}{\normalfont\sffamily}%\rmfamily}%\slshape}
% leere fusszeile:
\lefoot{}\rofoot{}
\ofoot{}\cfoot{} % Fusszeile bei einseitigem Druck

\newcommand{\Ridx}[1]{\cd{#1}\index{R Kommandos@\R Kommandos!#1@\cd{#1}}}
\newcommand{\idx}[1]{\index{#1}}

%%% Setze den Durchschuss (Zeilenabstand)
\usepackage{setspace}
\setstretch{1.0}

%%% --------------------------------------------------
%%% Code Umgebung
%%% --------------------------------------------------
% \newcommand{\cd}[1]{\,\texttt{#1}\,}
\definecolor{CodeColor}{gray}{0.85}
\newenvironment{CodeShaded}{%
  \def\FrameCommand{\colorbox{CodeColor}}%
  \MakeFramed {\FrameRestore}}{
  \endMakeFramed}

\newenvironment{code}{%
%\small
\begin{lstlisting}
}{%
\end{lstlisting}
}

\renewcommand{\emph}[1]{\textit{#1}}

%%% ------------------------------
%%% font related stuff
%%% ------------------------------
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{europs}  
\newcommand{\euro}{\EURofc{} }    % provides \euro
\usepackage{microtype}
\usepackage{xspace}

% font selection
\usepackage{newtxtext,newtxmath,newtxtt}

\usepackage{enumitem}
\setlist[description]{font=\normalfont\itshape\space}
\setlist{nosep}


\usepackage{iflang} % Spracherkennung je nach Einstellung mit dem Babel

% Aufzählung im Inhaltsverzeichnis serifenlos
\newcommand*\tocentryformat[1]{{\sffamily#1}}
\RedeclareSectionCommands
  [
    tocentryformat=\tocentryformat,
    tocpagenumberformat=\tocentryformat
  ]
  {section,subsection,subsubsection,paragraph,subparagraph}



%%% --------------------------------------------------
%%% Index und Co.
%%% --------------------------------------------------
\usepackage{makeidx}
\renewcommand{\indexname}{Stichwortverzeichnis}
\makeindex
\usepackage[columns=3,
            unbalanced=true,
						columnsep=2em,
						rule=0pt,
						indentunit=5pt]{idxlayout}
%
\usepackage{index}
\makeindex

\newindex{R}{Ridx}{Rind}{\R Kommandoverzeichnis}
\renewindex{default}{idx}{ind}{Stichwortverzeichnis}



% ---------------------------------------------
% Textbausteine
% ---------------------------------------------


%% Angaben, die individuell im Dokument benötigt werden (Titelseite und Erklärung) und im Text geändert werden können:

\newcommand{\Telefon} {\phone}
\newcommand{\AutorName}           {Leonhard Euler}
\newcommand{\AutorMatrikelnummer} {2718282}
\newcommand{\AutorStrasse}        {Am Musterweg~3}
\newcommand{\AutorPLZOrt}         {86191 Ausgburg}
\newcommand{\AutorTelefon}        {+49\,1504\,1707}
\newcommand{\AutorEMail}          {leo.euler@hs-augsburg.de}

\newcommand{\ArbeitThema}         {Methodus Inveniendi Lineas Curvas}
\newcommand{\ArbeitTyp}           % {Bachelorarbeit}
                                   {Masterarbeit} 
\newcommand{\AutorOrtUnterschrift} {Augsburg}

\newcommand{\Fakultaet}           {Fakultät für \\ Angewandte Geistes- und \\ Naturwissenschaften}
                                  % {Fakultät für \\ Architektur und Bauwesen}
                                  % {Fakultät für \\ Elektrotechnik}
                                  % {Fakultät für \\ Gestaltung}
                                  % {Fakultät für \\ Informatik}
                                  % {Fakultät für \\ Maschinenbau und Verfahrenstechnik} \booltrue{diesel}
                                  % {Fakultät für \\ Wirtschaft}
                
\newcommand{\FakultaetTelefon}    {+49\,821\,5586-3301}
\newcommand{\FakultaetFax}        {+49\,821\,5586-3310}
\newcommand{\FakultaetEMail}      {fgn@hs-augsburg.de}

\newcommand{\Studiengang}         {Mathematik}
\newcommand{\Abschluss}           {Master of Science (M.Sc.)}
                               
\newcommand{\DatumAbgabe}        {\today}
\newcommand{\DatumThemenvergabe} {\today}
\newcommand{\DatumVerteidigung}  {}

\newcommand{\NonDisclosure}      {Ja}
                                  % {Nein}
\newcommand{\Erstpruefer}        {Prof.~Dr.~Frank N. Stein}
\newcommand{\Zweitpruefer}       {Prof.~Dr.~Mario Huana}
\newcommand{\HochschuleName}     {Hochschule für angewandte \\ Wissenschaften Augsburg}
\newcommand{\HochschuleStrasse}  {An der Hochschule 1}
\newcommand{\HochschulePLZOrt}   {D-86161 Augsburg}
\newcommand{\HochschuleTelefon}  {+49\,821\,5586-0}
\newcommand{\HochschuleFax}      {+49\,821\,5586-3222}
\newcommand{\HochschuleURL}      {www.hs-augsburg.de}
\newcommand{\HochschuleEMail}    {info@hs-augsburg.de}


%% Die Hochschulfarben:
% \definecolor{<name>}{<colorspace>}{<values>}
\definecolor{HSorange}{RGB}{255,150,0}       %
\definecolor{HSrot}{RGB}{240,0,69}           % 
\definecolor{HSblau}{RGB}{103,132,165}         % 
\definecolor{HSdunkelgrau}{RGB}{123,118,105}   % 
\definecolor{HShellgrau}{RGB}{175,170,149}   % 

\definecolor{HSred}{RGB}{240,0,69}           % 
\definecolor{HSblue}{RGB}{103,132,165}         % 
\definecolor{HSdarkgrey}{RGB}{123,118,105}   % 
\definecolor{HSlightgrey}{RGB}{175,170,149}   % 

% links im Text
\ifbool{mitLinks}{%
\usepackage[colorlinks=true, 
            linkcolor=blue!60!black,
            citecolor=blue!80!black]{hyperref}%
}{}

\usepackage{tikz}

%\usetikzlibrary{3d}
%\usetikzlibrary{angles}
%\usetikzlibrary{babel}
%\usetikzlibrary{arrows}
%\usetikzlibrary{backgrounds}
%\usetikzlibrary{calc}
%% \usetikzlibrary{circuits}
%\usetikzlibrary{decorations}
%\usetikzlibrary{decorations.pathreplacing}
%\usetikzlibrary{decorations.pathmorphing}
%\usetikzlibrary{decorations.shapes}
%\usetikzlibrary{decorations.fractals}
%\usetikzlibrary{decorations.markings}
%\usetikzlibrary{fadings}
%\usetikzlibrary{fit}
%\usetikzlibrary{intersections}
%\usetikzlibrary{matrix}
%\usetikzlibrary{mindmap}
%\usetikzlibrary{patterns}
%\usetikzlibrary{plotmarks}
%\usetikzlibrary{positioning}
%\usetikzlibrary{quotes}
%\usetikzlibrary{shadows}
%\usetikzlibrary{shapes}
%\usetikzlibrary{shapes.symbols}
%\usetikzlibrary{shapes.geometric}
%\usetikzlibrary{through}


\usepackage{geometry}


% ---------------------------------------------
% Textbausteine
% ---------------------------------------------
\newcommand{\HSAtitlepage}{
\begingroup
\newcommand*{\HSAfont}{\fontfamily{phv}\selectfont}

\newgeometry{left = 27mm, right = 15mm, top = 20mm, head = 0mm, textheight = 276mm}

\begin{titlepage}
\begin{minipage}{\textwidth}
\hspace{10.53cm} \includegraphics[width= 60mm]{hsa-logo} \\
\end{minipage}

\medskip

\HSAfont
\begin{minipage}[t][15cm][t]{129mm}
{\color{HSorange} \fontsize{18}{18} \selectfont \textbf{\ArbeitTyp}} \\[0.5ex]
% {\fontsize{12}{18} \selectfont im Studiengang \Studiengang} \\[1ex]
{\fontsize{12}{18} \selectfont {\small zur Erlangung des Grades}\\[0.1ex] \Abschluss{} in~\Studiengang}

\vspace{18mm}
	
{\color{HSorange} \fontsize{18}{30} \selectfont  
\textbf{\ArbeitThema} 
}

\vspace{16mm}

{\fontsize{15}{18}  \selectfont 
{\small erstellt von } \AutorName 
}


\vspace{55mm}

 \fontsize{11}{18}  \selectfont
\begin{tabularx}{.8\textwidth}{ll} \toprule
	Erstprüfer  & \Erstpruefer \\
\ifbool{Zweitpruefer}{Zweitprüfer  & \Zweitpruefer \\}{} 
	Themenvergabe am  & \DatumThemenvergabe \\
	Eingereicht am  & \DatumAbgabe \\
  Geheimhaltungsvereinbarung & \NonDisclosure  \\
	\bottomrule
\end{tabularx}

\end{minipage}
\begin{minipage}[t][15cm][t]{40mm}
{\color{HSorange} \fontsize{12}{12} \selectfont
\Fakultaet
}

\ifbool{Diesel}{\vspace{20mm}}{\vspace{40mm}}

\fontsize{7}{10} \selectfont
\textbf{\AutorName} \\
\AutorStrasse \\
\AutorPLZOrt \\
\AutorTelefon \\
\AutorEMail \\[2mm]
Matrikelnummer: \\
\AutorMatrikelnummer

\vspace{30mm}

{\color{HSred}
\HochschuleName  \\

\smallskip
\HochschuleStrasse \\
\HochschulePLZOrt\\

\smallskip
Telefon: \HochschuleTelefon \\ 
Fax: \HochschuleFax \\   
\HochschuleURL \\
\HochschuleEMail

}

\end{minipage}
\vspace{1.5cm}

\ifbool{Diesel}{
\hspace{11.5cm}\includegraphics[width= 3cm]{hsa-diesel}
}{}
\end{titlepage}

\restoregeometry
\endgroup % end of font switch
}





% ----------------------------------------------
\newcommand{\AutorErklaerung} {

\newpage

\IfLanguageName{english}{%
\section*{Declaration concerning the final project}

I herewith affirm that I have drafted the submitted dissertation independently and have not used any other sources or resources than those declared therein. Sources quoted literally or substantively have been cited according to the acknowledged rules of  scientific publication. Furthermore, I declare  that the dissertation has  not  been submitted elsewhere. I have read and understood the explanatory note on fraud in examination procedures at the University of Applied Sciences Augsburg. I affirm that the submitted dissertation does not include any plagiarism or any texts or figures created by other persons acting on my instructions. }{%

\section*{Erklärung zur Abschlussarbeit} 

Hiermit versichere ich, die eingereichte Abschlussarbeit selbständig verfasst und keine andere als die von mir angegebenen Quellen und Hilfsmittel benutzt zu haben. Wörtlich oder inhaltlich verwendete Quellen wurden entsprechend den anerkannten Regeln wissenschaftlichen Arbeitens zitiert. Ich erkläre weiterhin, dass die vorliegende Arbeit noch nicht anderweitig als Abschlussarbeit eingereicht wurde. Das Merkblatt zum Täuschungsverbot im Prüfungsverfahren der Hochschule Augsburg habe ich gelesen und zur Kenntnis genommen. Ich versichere, dass die von mir abgegebene Arbeit keinerlei Plagiate, Texte oder Bilder umfasst, die durch von mir beauftragte Dritte erstellt wurden.
}

\AutorOrtUnterschrift, den \today

\vspace*{2cm}

\rule[-0.2cm]{7cm}{0.5pt}

{\AutorName} 

}





% ----------------------------------------------------------
% ----- listings settings
%\usepackage{tabularx}
%\usepackage{color}
\usepackage[final]{listings}
\lstloadlanguages{Perl,XML}
\definecolor{CodeColor}{gray}{0.1}
%\newrgbcolor{hellgrau}{0.95 0.95 0.95}
%\newrgbcolor{orange}{0.87 0.42 0.06}
%\newrgbcolor{gelb}{1 0.94 0.75}
%\newrgbcolor{hellblau}{0.55 0.73 0.89}
\lstset{%language=XML, 
        basicstyle=\ttfamily,
        %numbers=left,
        numbersep=2ex,numberstyle=\scriptsize,
%        % frame settings --------------------
%        frame=single,
%        backgroundcolor=\color{hellhellblau},
%        framerule=0mm,
%        % ---------------- end frame settings
        xleftmargin=4ex,
        xrightmargin=2ex,
        aboveskip=2\medskipamount,
        belowskip=2ex,
        breaklines=true,
        %frameround=tttt,
        %framesep=4pt,
        %fillcolor=\color{hellgrau},
        %rulecolor=\color{hellgrau},
        }
\newcommand{\cd}[1]{\lstinline{#1}}


% ----------------------------------------------------------
% inline code aus dem listings Paket skaliert (automatisch) 
% nicht richtig; workaround mit Makro
% (https://tinyurl.com/yg9wcfox)
\makeatletter
\newcommand\applyCurrentFontsize
{%
  % we first save the current fontsize, baseline-skip,
  % and listings' basicstyle
  \let\f@sizeS@ved\f@size%
  \let\f@baselineskipS@ved\f@baselineskip%
  \let\basicstyleS@ved\lst@basicstyle%
  % we now change the fontsize of listings' basicstyle
  \renewcommand\lst@basicstyle%
  {%
      \basicstyleS@ved%
      \fontsize{\f@sizeS@ved}{\f@baselineskipS@ved}%
      \selectfont%
  }%
}
\makeatother

\newcommand\lstI[2][]
{%
  \bgroup%
    \lstset{#1}%
    \applyCurrentFontsize%
    % ... possibly other macros whose effects should remain local ...
    \lstinline|#2|%
  \egroup%
}

\newcommand{\ANF}[1]{"`#1"'}
\renewcommand{\paragraph}{\minisec}
